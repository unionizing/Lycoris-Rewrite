-- ExploitTab module.
local ExploitTab = {}

---Initialize Mob Exploits section.
---@param groupbox table
function ExploitTab.initMobExploitsSection(groupbox)
	local voidMobsToggle = groupbox:AddToggle("VoidMobs", {
		Text = "Void Mobs",
		Tooltip = "Teleport nearby mobs and send them to the void.",
		Default = false,
	})

	voidMobsToggle:AddKeyPicker("VoidMobsKeyBind", { Default = "N/A", SyncToggleState = true, Text = "Void Mobs" })

	---@todo: Fix detach and restore functions - they break character and visualizations is too confusing.
	--[[
	local pathfindBreakerToggle = groupbox:AddToggle("PathfindBreaker", {
		Text = "Pathfind Breaker",
		Tooltip = "Break the pathfinding of Humanoid Mobs and prevent them from fighting back.",
		Default = false,
	})

	pathfindBreakerToggle:AddKeyPicker(
		"PathfindBreakerKeybind",
		{ Default = "N/A", SyncToggleState = true, Text = "Pathfind Breaker" }
	)

	local pbDepBox = groupbox:AddDependencyBox()

	local showRealBodyToggle = pbDepBox:AddToggle("PathfindBreakerShowBody", {
		Text = "Show Real Body",
		Tooltip = "Show your character's real body while using the Pathfind Breaker.",
		Default = false,
	})

	showRealBodyToggle:AddColorPicker("PathfindBreakerBodyColor", {
		Default = Color3.new(1, 1, 1),
	})

	pbDepBox:AddToggle("PathfindBreakerBringMob", {
		Text = "Bring Mob",
		Tooltip = "Pathfind breaker will attempt to lure the mob towards your direction.",
		Default = false,
	})

	pbDepBox:SetupDependencies({
		{ Toggles.PathfindBreaker, true },
	})
	]]
	--
end

---Initialize Local Character Exploits section.
---@param groupbox table
function ExploitTab.initLocalCharacterExploitsSection(groupbox)
	local moveWhileKnockedToggle = groupbox:AddToggle("MoveWhileKnocked", {
		Text = "Move While Knocked",
		Tooltip = "Move your character while in a knocked down state.",
		Default = false,
	})

	moveWhileKnockedToggle:AddKeyPicker(
		"MoveWhileKnockedKeyBind",
		{ Default = "N/A", SyncToggleState = true, Text = "Move While Knocked" }
	)
end

---Initialize tab.
---@param window table
function ExploitTab.init(window)
	-- Create tab.
	local tab = window:AddTab("Exploit")

	-- Initialize sections.
	ExploitTab.initMobExploitsSection(tab:AddDynamicGroupbox("Mob Exploits"))
	ExploitTab.initLocalCharacterExploitsSection(tab:AddDynamicGroupbox("Local Character Exploits"))
end

-- Return ExploitTab module.
return ExploitTab
